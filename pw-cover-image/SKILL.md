---
name: pw-cover-image
description: 为文章生成精美封面图。分析内容并创建吸引眼球的手绘风格封面图, 支持多种风格选项。当用户要求 "生成封面图"、"创建文章封面" 或 "制作封面" 时使用。
---

# 封面图生成器

为文章生成手绘风格封面图, 支持多种风格选项。

## 使用方法

```bash
# 从 markdown 文件生成 (根据内容自动选择风格)
/pw-cover-image path/to/article.md

# 指定风格
/pw-cover-image path/to/article.md --style blueprint
/pw-cover-image path/to/article.md --style warm
/pw-cover-image path/to/article.md --style dark-atmospheric

# 不包含标题文字
/pw-cover-image path/to/article.md --no-title

# 组合选项
/pw-cover-image path/to/article.md --style minimal --no-title

# 从直接输入的文本生成
/pw-cover-image
[粘贴内容或描述主题]

# 直接输入并指定风格
/pw-cover-image --style playful
[粘贴内容]
```

## 选项

| 选项 | 说明 |
|------|------|
| `--style <name>` | 指定封面风格 (见下方风格画廊) |
| `--aspect <ratio>` | 宽高比: 2.35:1 (电影感, 默认), 16:9 (宽屏), 1:1 (社交媒体) |
| `--lang <code>` | 标题文字输出语言 (en, zh, ja 等) |
| `--no-title` | 生成不含标题文字的封面 (仅视觉元素) |

## 风格画廊

| 风格 | 说明 |
|------|------|
| `elegant` (默认) | 精致、优雅、低调 |
| `blueprint` | 技术图纸、工程精度 |
| `bold-editorial` | 杂志封面冲击力、戏剧性排版 |
| `chalkboard` | 黑色黑板、彩色粉笔绘画 |
| `dark-atmospheric` | 电影感暗色模式、发光点缀 |
| `editorial-infographic` | 杂志解说、视觉叙事 |
| `fantasy-animation` | 吉卜力/迪士尼风格、奇幻魅力 |
| `intuition-machine` | 技术简报、双语标签 |
| `minimal` | 超简洁、禅意、专注 |
| `nature` | 有机、平静、自然 |
| `notion` | 简洁 SaaS 仪表板、生产力风格 |
| `pixel-art` | 复古 8 位、怀旧游戏美学 |
| `playful` | 有趣、创意、异想天开 |
| `retro` | 半色调点、复古徽章、经典 |
| `sketch-notes` | 手绘、教育性、温暖 |
| `vector-illustration` | 扁平矢量、黑色轮廓、复古色彩 |
| `vintage` | 陈旧纸张、历史感、探险风格 |
| `warm` | 友好、亲切、以人为本 |
| `watercolor` | 柔和手绘、自然温暖 |

详细风格定义: `references/styles/<style>.md`

## 自动风格选择

当未指定 `--style` 时, 系统会分析内容选择最佳风格:

| 内容特征 | 选择的风格 |
|---------|-----------|
| 架构、系统设计、工程 | `blueprint` |
| 产品发布、主题演讲、营销、品牌 | `bold-editorial` |
| 教育、课堂、教程、教学 | `chalkboard` |
| 娱乐、创意、高端、电影感 | `dark-atmospheric` |
| 技术解说、科学、研究 | `editorial-infographic` |
| 故事讲述、儿童、奇幻、魔法 | `fantasy-animation` |
| 技术文档、学术、双语 | `intuition-machine` |
| 个人故事、情感、成长、生活 | `warm` |
| 简单、禅意、专注、本质 | `minimal` |
| 有趣、简单、初学者、休闲 | `playful` |
| 自然、环保、健康、有机 | `nature` |
| 流行文化、80/90 年代怀旧、徽章 | `retro` |
| 产品、SaaS、仪表板、生产力 | `notion` |
| 游戏、复古科技、开发者、8 位 | `pixel-art` |
| 教育、教程、知识分享 | `sketch-notes` |
| 创意提案、品牌、玩具风格 | `vector-illustration` |
| 历史、探索、遗产、传记 | `vintage` |
| 生活方式、旅行、美食、个人 | `watercolor` |
| 商业、专业、策略、分析 | `elegant` |

## 文件管理

### 输出目录

每个会话创建一个以内容主题命名的独立目录:

```
cover-image/{topic-slug}/
├── source-{slug}.{ext}    # 源文件 (文本、图片等)
├── prompts/
│   └── cover.md
└── cover.png
```

**主题命名规则**:
1. 从内容中提取主题 (2-4 个词, kebab-case)
2. 示例: "AI 的未来" → `ai-future`

### 冲突解决

如果 `cover-image/{topic-slug}/` 已存在:
- 追加时间戳: `{topic-slug}-YYYYMMDD-HHMMSS`
- 示例: `ai-future` 已存在 → `ai-future-20260118-143052`

### 源文件

使用 `source-{slug}.{ext}` 命名复制所有源文件:
- `source-article.md` (主要文本内容)
- `source-logo.png` (对话中的图片)

支持多个源文件: 文本、图片、对话中的文件。

## 工作流程

### 步骤 1: 分析内容

1. **保存源内容** (如果还不是文件):
   - 如果用户提供文件路径: 直接使用
   - 如果用户粘贴内容: 保存到目标目录的 `source.md`

2. **提取关键信息**:
   - **主题**: 文章讲什么?
   - **核心信息**: 关键要点是什么?
   - **语气**: 严肃、有趣、鼓舞人心、教育性?
   - **关键词**: 识别风格信号词

3. **语言检测**:
   - 检测内容的**源语言**
   - 检测对话上下文的**用户语言**
   - 注意源语言 ≠ 用户语言 (将在步骤 3 询问)

### 步骤 2: 确定选项

1. **风格选择**:
   - 如果指定了 `--style`, 使用该风格
   - 否则, 扫描内容的风格信号并自动选择 3 个候选
   - 如果没有明确信号, 默认使用 `elegant`

2. **宽高比**:
   - 如果指定了 `--aspect`, 使用该比例
   - 否则, 准备选项: 2.35:1 (电影感), 16:9 (宽屏), 1:1 (社交媒体)

### 步骤 3: 确认选项

**目的**: 让用户在生成前一次性确认所有选项。

**重要**: 使用 AskUserQuestion 在单个确认步骤中呈现所有选项。不要用多个单独的确认打断工作流程。

**确定要询问的问题**:

| 问题 | 何时询问 |
|------|---------|
| 风格 | 总是 (必需) |
| 宽高比 | 总是 (提供常用选项) |
| 语言 | 仅当 `源语言 ≠ 用户语言` |

**呈现选项** (使用 AskUserQuestion 包含所有适用问题):

**问题 1 (风格)** - 总是:
- 风格 A (推荐): [风格名称] - [简要说明]
- 风格 B: [风格名称] - [简要说明]
- 风格 C: [风格名称] - [简要说明]
- 自定义: 提供自定义风格参考

**问题 2 (宽高比)** - 总是:
- 2.35:1 电影感 (推荐) - 超宽、戏剧性
- 16:9 宽屏 - 标准视频/演示
- 1:1 方形 - 社交媒体优化

**问题 3 (语言)** - 仅当源语言 ≠ 用户语言:
- [源语言] (匹配内容)
- [用户语言] (你的偏好)

**语言处理**:
- 如果源语言 = 用户语言: 只需告知用户 (例如 "标题将使用中文")
- 如果不同: 询问标题文字使用哪种语言

### 步骤 4: 生成封面概念

根据选定的风格创建封面图概念:

**标题** (如果包含, 最多 8 个字符):
- 将核心信息提炼为有力的标题
- 使用钩子: 数字、问题、对比、痛点
- 如果使用 `--no-title` 标志则跳过

**视觉元素**:
- 符合风格的图像和图标
- 1-2 个代表主题的象征性元素
- 符合风格的隐喻或类比

### 步骤 5: 创建提示词文件

使用确认的选项将提示词保存到 `prompts/cover.md`。

**所有提示词都使用用户确认的语言偏好编写。**

**提示词格式**:

```markdown
封面主题: [2-3 个词的主题]
风格: [选定的风格名称]
宽高比: [确认的宽高比]

[如果包含标题:]
标题文字: [8 个字符或更少, 使用确认的语言]
副标题: [可选, 使用确认的语言]

视觉构图:
- 主视觉: [匹配风格的描述]
- 布局: [基于标题包含和宽高比的定位]
- 装饰元素: [符合风格的元素]

配色方案:
- 主色: [风格主色]
- 背景: [风格背景色]
- 点缀: [风格点缀色]

风格注释: [要强调的特定风格特征]

[如果无标题:]
注意: 无标题文字, 仅纯视觉插图。
```

### 步骤 6: 生成图片

**图片生成技能选择**:
1. 检查可用的图片生成技能
2. 如果有多个技能可用, 询问用户选择

**生成**:
使用提示词文件、输出路径和确认的宽高比调用选定的图片生成技能。

### 步骤 7: 输出摘要

```
封面图已生成!

主题: [主题]
风格: [风格名称]
宽高比: [宽高比]
标题: [封面标题] (或 "无标题 - 仅视觉")
语言: [确认的语言]
位置: [输出路径]

预览图片以验证是否符合你的期望。
```

## 注意事项

- 封面应在小预览尺寸下立即可理解
- 标题 (如果包含) 必须可读且有冲击力
- 视觉隐喻比字面表现效果更好
- 在整个封面中保持风格一致性
- 图片生成通常需要 10-30 秒
- 标题文字使用用户确认的语言偏好
- 宽高比: 2.35:1 用于电影感/戏剧性, 16:9 用于宽屏, 1:1 用于社交媒体

## 扩展支持

通过 EXTEND.md 支持自定义风格和配置。

**检查路径** (优先级顺序):
1. `.pw-skills/pw-cover-image/EXTEND.md` (项目)
2. `~/.pw-skills/pw-cover-image/EXTEND.md` (用户)

如果找到, 在步骤 1 之前加载。扩展内容覆盖默认值。
